- 32 канала вейвсинтеза
- 4МБ памяти сэмплов
- линейная интерполяция сэмплов на частоту аудио (44100Гц)
- панорамирование каждого канала в левый/правый стереоканал с громкостью 0-64
- 512 байт дескрипторов каналов
- плеер ХМ на з80

ФСМ вейвсинтеза нарезает аудиопоток в ФИФО 512 байт (128 выборок).
Обращение к ОЗУ за выборками сэмплов происходит по БАСРК. Обращение длится 2 или 3 такта з80 (в зависимости от сэмпла моно/стерео).
БАСРК 2 такта сбрасывается комбинаторикой с БАСАК. Для 3 тактов задержан на такт.
2 такта дает торможение з80 на 12% на частоте 24МГц.
По окончании тика формирует ИНТ для з80, по которому з80 может менять файл дескрипторов каналов.
512 байт дескрипторов каналов находятся в ЕАВ-е. Запись процессором допускается только во время неактивности ФСМ вейвсинтеза.
З80 выставляет 32 флага для указания, какой канал надо перезапускать со стартового адреса и ставит флаг об окончании перезагрузки, после чего ФСМ стартует на новый тик.
В таблице состояния каналов хранятся: копии выборок для интерполяции, текущие адрес и суб-адрес сэмпла, фаза лупа.
Если при пересчете адреса выборки сэмпла физадрес не поменялся (изменился только суб-адрес), обращение к ОЗУ не производится.
Проц должен парсить паттерны и напихивать ФИФО данными для таблицы каналов (512 байт) и флагов перезапуска (32 байта).

- промоделить сложение выборок всех каналов с сатурацией

--- ФСМ вейвсинтеза ---

+ channel inactive: skip
- channel active:
  - retrigger
  - continue:
    - play fwd
    - play bck
    
    
http://coub.com/view/559x5 - жадина
http://coub.com/view/1bodn7tu
http://coub.com/view/557pp
http://coub.com/view/32yzw - bombit
